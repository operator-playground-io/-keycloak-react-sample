(this["webpackJsonpedge-keycloak2"]=this["webpackJsonpedge-keycloak2"]||[]).push([[0],{79:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),s=n(39),r=n.n(s),a=n(11),l=n.n(a),i=n(13),j=n(14),u=n(12),d=n(5),h=n(15),b=n(41),O=n.n(b),x="production";console.log("NODE_ENV: ",x);var p=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH_CLIENT:"vanilla",REACT_APP_AUTH_REALM:"myrealm",REACT_APP_AUTH_SERVER_URL:"http://localhost:8080/auth/"}),f=p.REACT_APP_AUTH_SERVER_URL,v=p.REACT_APP_AUTH_REALM,g=p.REACT_APP_AUTH_CLIENT;console.log("REACT_APP_AUTH_SERVER_URL: ",f),console.log("REACT_APP_AUTH_REALM: ",v),console.log("REACT_APP_AUTH_CLIENT: ",g);var E=window,_=E.SERVER_URL,A=E.REALM,k=E.CLIENT;console.log("SERVER_URL: ",_),console.log("REALM: ",A),console.log("CLIENT: ",k);var R=_,T=A,L=k;console.log("Backend URL: ",R),console.log("Backend REALM: ",T),console.log("Backend CLIENT: ",L);var m={realm:T,url:R,clientId:L};console.log("Keycloak params: ",m);var y=new O.a(m),C=n(84),P=n(82),S=n(83),U=n(85),I=n(2),w=function(e){var t=Object(c.useState)("/"),n=Object(j.a)(t,2),o=n[0],s=n[1],r=e.user,a=Object(h.b)(),d=a.keycloak,b=(a.initialized,d.authenticated),O=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("login: ",t),t.preventDefault(),e.next=4,d.login();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("logout: ",t),t.preventDefault(),e.next=4,d.logout();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=(console.log("Render auth links - authenticated: ",b),b?Object(I.jsxs)(P.a,{children:[Object(I.jsx)(S.a,{children:Object(I.jsx)(U.a.Item,{children:Object(I.jsx)(U.a.Link,{eventKey:"/",as:"div",children:Object(I.jsx)(u.b,{to:"/",children:"Home"})})})}),Object(I.jsx)(S.a,{xl:5,children:Object(I.jsx)(U.a.Item,{children:Object(I.jsx)(U.a.Link,{eventKey:"/posts",as:"div",href:"/posts",children:Object(I.jsx)(u.b,{to:"/posts",children:"Posts"})})})}),Object(I.jsx)(S.a,{children:Object(I.jsx)(U.a.Item,{children:Object(I.jsxs)(U.a.Link,{eventKey:"/logoff",as:"div",href:"#",children:["Welcome ",r.name]})})}),Object(I.jsx)(S.a,{children:Object(I.jsx)(U.a.Item,{children:Object(I.jsx)(U.a.Link,{eventKey:"/logoff",as:"div",href:"#",onClick:x,children:Object(I.jsx)(u.b,{to:"/logoff",children:"Logout"})})})})]}):Object(I.jsxs)(P.a,{children:[Object(I.jsx)(S.a,{xs:7,children:Object(I.jsx)(U.a.Item,{children:Object(I.jsx)(U.a.Link,{eventKey:"/",as:"div",children:Object(I.jsx)(u.b,{to:"/",children:"Home"})})})}),Object(I.jsx)(S.a,{children:Object(I.jsx)(U.a.Item,{children:Object(I.jsx)(U.a.Link,{eventKey:"/login",as:"div",href:"/#",onClick:O,children:Object(I.jsx)(u.b,{to:"/login",children:"Login"})})})})]}));return Object(I.jsx)(U.a,{variant:"tabs",defaultActiveKey:"/",activeKey:o,onSelect:function(e){console.log("select tab ",e),console.log("userInfo:",r),s(e)},children:Object(I.jsx)(C.a,{children:p})})},H=function(e){return Object(I.jsx)("div",{children:"This is a public page. Click on the Login link to authenticate and see the list of posts."})},K=n(43),N=n.n(K),D=n(17),M=function(e){var t=Object(c.useState)(),n=Object(j.a)(t,2),o=n[0],s=n[1],r=Object(h.b)(),a=r.keycloak,u=(r.initialized,a.authenticated);Object(c.useEffect)((function(){return d()}),[]);var d=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Get posts..."),u||s([]),e.prev=2,console.log("Get posts from https://jsonplaceholder.typicode.com/users/1/posts"),e.next=6,N.a.get("https://jsonplaceholder.typicode.com/users/1/posts");case 6:t=e.sent,n=t.data,console.log(n),s(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("Failed to retrieve the posts. error: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return console.log("Posts: ",o),o&&0!==o.length?Object(I.jsx)("div",{children:o.map((function(e){return Object(I.jsx)(D.a,{bg:"light",children:Object(I.jsxs)(D.a.Body,{children:[Object(I.jsx)(D.a.Title,{children:e.title}),Object(I.jsx)(D.a.Text,{children:e.body})]})},e.id)}))}):Object(I.jsx)("div",{children:"No post was found."})};n(79),n(80);var V=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=(t[0],t[1]),o=Object(c.useState)({}),s=Object(j.a)(o,2),r=s[0],a=s[1],b=function(){var e=Object(i.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("tokens: ",t),n(t?t.token:""),!t||!t.token){e.next=8;break}return e.next=5,y.loadUserInfo();case 5:c=e.sent,console.log("User profile:",c),a(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)(h.a,{authClient:y,initOptions:{onLoad:"check-sso"},onTokens:b,onAuthSuccess:function(e){console.log("onAuthSuccess: ",e)},onAuthLogout:function(e){console.log("onAuthLogout: ",e)},onEvent:function(e){console.log("onEvent: ",e)},children:Object(I.jsxs)(u.a,{children:[Object(I.jsx)(w,{user:r}),Object(I.jsx)(C.a,{children:Object(I.jsx)(P.a,{style:{marginTop:"50px"},children:Object(I.jsx)(S.a,{children:Object(I.jsxs)(d.d,{children:[Object(I.jsx)(d.b,{exact:!0,path:"/posts",render:function(e){return Object(I.jsx)(M,{})}}),Object(I.jsx)(d.b,{exact:!0,path:"/",render:H}),Object(I.jsx)(d.a,{to:"/"})]})})})})]})})};r.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(V,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.178a0bf8.chunk.js.map