{"version":3,"sources":["context/types.js","context/AppReducer.js","context/AppContext.js","context/AppState.js","keycloak.js","components/NavBar.js","components/ErrorMessage.js","components/Home.js","components/Posts.js","components/KeycloakApp.js","App.js","index.js"],"names":["GET_MESSAGES","SET_TOKEN","GET_USER","CLEAR_USER","SET_ERROR","CLEAR_ERROR","SET_LOADING","AppReducer","state","action","console","log","type","messages","payload","loading","token","user","error","appContext","createContext","AppState","props","useReducer","appReducer","operation","dispatch","getMessages","a","setLoading","axios","get","response","data","message","setError","setToken","newToken","keycloak","crtToken","getUser","clearUser","loadUserInfo","profile","setTimeout","clearError","AppContext","Provider","value","children","NODE_ENV","process","REACT_APP_AUTH_SERVER_URL","REACT_APP_AUTH_REALM","REACT_APP_AUTH_CLIENT","window","SERVER_URL","REALM","CLIENT","BACKEND_URL","BACKEND_REALM","BACKEND_CLIENT","kcConfig","Keycloak","NavBar","useState","selectedTab","setSelectedTab","useKeycloak","initialized","useContext","authenticated","login","e","preventDefault","logout","links","Row","noGutters","Col","md","lg","xl","Nav","Item","style","textAlign","Link","eventKey","href","as","to","disabled","name","onClick","defaultActiveKey","activeKey","onSelect","selectedKey","backgroundColor","Container","ErrorMessage","Alert","variant","marginTop","Home","Posts","useEffect","length","map","post","Card","bg","Body","Title","title","Text","body","id","KeycloakApp","onTokens","tokens","undefined","authClient","initOptions","onLoad","onEvent","event","exact","path","render","routeProps","App","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8cfe3699.chunk.js","sourcesContent":["export const GET_MESSAGES = 'GET_MESSAGES';\r\nexport const SET_TOKEN = 'SET_TOKEN';\r\nexport const GET_USER = 'GET_USER';\r\nexport const CLEAR_USER = 'CLEAR_USER';\r\nexport const SET_ERROR = 'SET_ERROR';\r\nexport const CLEAR_ERROR = 'CLEAR_ERROR';\r\nexport const SET_LOADING = 'SET_LOADING';","import {GET_MESSAGES, SET_TOKEN, GET_USER, CLEAR_USER, SET_ERROR, CLEAR_ERROR, SET_LOADING} from './types';\r\n\r\nconst AppReducer = (state, action) => {\r\n    console.log('state: ', state, ', action: ', action);\r\n    \r\n    switch ( action.type ) {\r\n        case GET_MESSAGES: \r\n            return {...state, messages: action.payload, loading: false };\r\n        case SET_TOKEN:\r\n            return {...state, token: action.payload};\r\n        case GET_USER:\r\n            return {...state, user: action.payload, loading: false};\r\n        case CLEAR_USER:\r\n            return {...state, user: {}};\r\n        case SET_ERROR:\r\n            return {...state, loading: false, error: action.payload};\r\n        case CLEAR_ERROR:\r\n            return {...state, error: null};\r\n        case SET_LOADING:\r\n            return {...state, loading: true};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default AppReducer;","import { createContext } from 'react';\r\n\r\nconst appContext = createContext();\r\n\r\nexport default appContext;","import React, { useReducer } from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {GET_MESSAGES, SET_TOKEN, GET_USER, CLEAR_USER, SET_ERROR, CLEAR_ERROR, SET_LOADING} from './types';\r\nimport appReducer from './AppReducer';\r\nimport AppContext from './AppContext';\r\n\r\nconst AppState = (props) => {\r\n  const INITIAL_STATE = {\r\n    messages: [],\r\n    token: null,\r\n    user: {},\r\n    loading: false,\r\n    error: null,\r\n    operation: '/messages'\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(appReducer, INITIAL_STATE);\r\n\r\n  const getMessages = async () => {\r\n    console.log(\"Get messages..\");\r\n\r\n    setLoading();\r\n\r\n    try {\r\n      console.log(\"Retrieve posts ..\");\r\n      const response = await axios.get(\r\n        \"https://jsonplaceholder.typicode.com/users/1/posts\"\r\n      );\r\n      const data = response.data;\r\n      console.log(\"Data is:\", data);\r\n\r\n      dispatch({ type: GET_MESSAGES, payload: data });\r\n    } catch (error) {\r\n      console.error(error);\r\n      console.error(error.message);\r\n      // console.error(error.response);\r\n      setError(error.message);\r\n      // setError(error.message ? error.response.data.msg : error.message);\r\n    }\r\n  };\r\n\r\n  const setToken = async (newToken, keycloak) => {\r\n    console.log(\"Set token..\");\r\n\r\n    const crtToken = state.token;\r\n    // console.log(\"New token: \", newToken, \", current token: \", crtToken);\r\n\r\n    dispatch({ type: SET_TOKEN, payload: newToken });\r\n\r\n    if (newToken) {\r\n      if (crtToken !== newToken) {\r\n        await getUser(keycloak);\r\n      } else {\r\n        console.log(\"Same token... No need to read user info...\");\r\n      }\r\n    } else {\r\n      clearUser();\r\n    }\r\n  };\r\n\r\n  const getUser = async (keycloak) => {\r\n    console.log(\"Get user info..\");\r\n\r\n    setLoading();\r\n\r\n    try {\r\n      const profile = await keycloak.loadUserInfo();\r\n      console.log(\"User profile:\", profile);\r\n      // alert(JSON.stringify(profile, null, \"  \"));\r\n\r\n      dispatch({ type: GET_USER, payload: profile });\r\n    } catch (error) {\r\n      console.error(error);\r\n      console.error(error.message);\r\n      // console.error(error.response);\r\n      setError(error.message);\r\n      // setError(error.message ? error.response.data.msg : error.message);\r\n    }\r\n  };\r\n\r\n  const clearUser = () => {\r\n    console.log(\"Clear user info..\");\r\n    dispatch({type: CLEAR_USER});\r\n  }\r\n\r\n  const setError = (error) => {\r\n    dispatch({ type: SET_ERROR, payload: error});\r\n\r\n    setTimeout( () => clearError(), 5000);\r\n  }\r\n\r\n  const clearError = () => {\r\n      dispatch({type: CLEAR_ERROR});\r\n  }\r\n\r\n  const setLoading = () => {\r\n      dispatch({type: SET_LOADING});\r\n  }\r\n\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        messages: state.messages,\r\n        token: state.token,\r\n        user: state.user,\r\n        loading: state.loading,\r\n        error: state.error,\r\n        getMessages,\r\n        setToken,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AppContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AppState;\r\n","import Keycloak from 'keycloak-js';\r\n\r\nconst NODE_ENV = process.env.NODE_ENV ? process.env.NODE_ENV: 'development';\r\nconsole.log('NODE_ENV: ', NODE_ENV);\r\n\r\nconst {REACT_APP_AUTH_SERVER_URL, REACT_APP_AUTH_REALM, REACT_APP_AUTH_CLIENT} = process.env;\r\nconsole.log('REACT_APP_AUTH_SERVER_URL: ', REACT_APP_AUTH_SERVER_URL);\r\nconsole.log('REACT_APP_AUTH_REALM: ', REACT_APP_AUTH_REALM);\r\nconsole.log('REACT_APP_AUTH_CLIENT: ', REACT_APP_AUTH_CLIENT);\r\n\r\nconst {SERVER_URL, REALM, CLIENT} = window;\r\nconsole.log('SERVER_URL: ', SERVER_URL);\r\nconsole.log('REALM: ', REALM);\r\nconsole.log('CLIENT: ', CLIENT);\r\n\r\nconst BACKEND_URL = NODE_ENV === 'development' ? REACT_APP_AUTH_SERVER_URL : SERVER_URL;\r\nconst BACKEND_REALM = NODE_ENV === 'development' ? REACT_APP_AUTH_REALM : REALM;\r\nconst BACKEND_CLIENT = NODE_ENV === 'development' ? REACT_APP_AUTH_CLIENT : CLIENT;\r\nconsole.log('Backend URL: ', BACKEND_URL);\r\nconsole.log('Backend REALM: ', BACKEND_REALM);\r\nconsole.log('Backend CLIENT: ', BACKEND_CLIENT);\r\n\r\nconst kcConfig = {\r\n    \"realm\": BACKEND_REALM,         //\"myrealm\", \r\n    \"url\": BACKEND_URL,          //\"http://localhost:8080/auth/\",\r\n    \"clientId\": BACKEND_CLIENT      //\"vanilla\",\r\n  }\r\nconsole.log('Keycloak params: ', kcConfig);\r\nconst keycloak = new Keycloak(kcConfig);\r\n\r\nexport default keycloak;","import { useKeycloak } from \"@react-keycloak/web\";\r\nimport { useState, useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Nav, Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport AppContext from \"../context/AppContext\";\r\n\r\nconst NavBar = (props) => {\r\n  const [selectedTab, setSelectedTab] = useState(\"/\");\r\n  const { keycloak, initialized } = useKeycloak();\r\n  const { user } = useContext(AppContext);\r\n  const { authenticated } = keycloak;\r\n\r\n  const renderAuthLinks = () => {\r\n    console.log(\r\n      \"Render auth links - initialized:\",\r\n      initialized,\r\n      \", authenticated: \",\r\n      authenticated\r\n    );\r\n\r\n    if (authenticated) {\r\n      return (\r\n        <Row noGutters>\r\n          <Col md={1} lg={1} xl={1}>\r\n            <Nav.Item style={{ textAlign: \"left\" }}>\r\n              <Nav.Link eventKey=\"/\" href=\"/\" as=\"div\">\r\n                <Link to=\"/\">Home</Link>\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          </Col>\r\n          <Col md={6} lg={6} xl={6}>\r\n            <Nav.Item style={{ textAlign: \"left\" }}>\r\n              <Nav.Link eventKey=\"/posts\" href=\"/posts\" as=\"div\">\r\n                <Link to=\"/posts\">Posts</Link>\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          </Col>\r\n          <Col md={4} lg={3} xl={3}>\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"/logoff\" href=\"#\" as=\"div\" disabled>\r\n                Welcome {user.name}\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          </Col>\r\n          <Col md={1} lg={2} xl={2}>\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"/logoff\" href=\"#\" onClick={logout} as=\"div\">\r\n                <Link to=\"/logoff\">Logout</Link>\r\n              </Nav.Link>\r\n            </Nav.Item>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Row noGutters>\r\n        <Col md={10} lg={10} xl={10}>\r\n          <Nav.Item style={{ textAlign: \"left\" }}>\r\n            <Nav.Link eventKey=\"/\" as=\"div\">\r\n              <Link to=\"/\">Home</Link>\r\n            </Nav.Link>\r\n          </Nav.Item>\r\n        </Col>\r\n        <Col md={2} lg={2} xl={2}>\r\n          <Nav.Item>\r\n            <Nav.Link eventKey=\"/login\" as=\"div\" href=\"/#\" onClick={login}>\r\n              <Link to=\"/login\">Login</Link>\r\n            </Nav.Link>\r\n          </Nav.Item>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  const selectTab = (selectedKey) => {\r\n    console.log(\"select tab \", selectedKey);\r\n    setSelectedTab(selectedKey);\r\n  };\r\n\r\n  const login = async (e) => {\r\n    console.log(\"login: \", e);\r\n    e.preventDefault();\r\n    await keycloak.login();\r\n  };\r\n\r\n  const logout = async (e) => {\r\n    console.log(\"logout: \", e);\r\n    e.preventDefault();\r\n    await keycloak.logout();\r\n  };\r\n\r\n  console.log(\"userInfo:\", user);\r\n\r\n  const links = renderAuthLinks();\r\n\r\n  return (\r\n    <Nav\r\n      // variant=\"tabs\"\r\n      // fill\r\n      defaultActiveKey=\"/\"\r\n      activeKey={selectedTab}\r\n      onSelect={selectTab}\r\n      style={{ backgroundColor: \"cyan\" }}\r\n    >\r\n      <Container>{links}</Container>\r\n    </Nav>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import React, {useContext} from 'react';\r\nimport Alert from 'react-bootstrap/Alert'\r\nimport appContext from '../context/AppContext';\r\n\r\nconst ErrorMessage = () => {\r\n    const {error} = useContext(appContext);\r\n\r\n    return (\r\n      error && \r\n      (\r\n        <Alert variant=\"danger\" style={{marginTop:'50px'}}>\r\n          {error}\r\n        </Alert>\r\n      )\r\n      // (\r\n      //   <div className={`alert alert-danger`}>\r\n      //     <i className=\"fas fa-info-cicle\"></i> {error}\r\n      //   </div>\r\n      // )\r\n    );\r\n}\r\n\r\nexport default ErrorMessage;\r\n","const Home = (props) => {\r\n  return (\r\n    <div>\r\n      This is a public page. Click on the Login link to authenticate and see the\r\n      list of posts.\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { useKeycloak } from \"@react-keycloak/web\";\r\nimport Card from \"react-bootstrap/Card\";\r\n\r\nimport AppContext from \"../context/AppContext\";\r\n\r\nconst Posts = (props) => {\r\n  const { keycloak, initialized } = useKeycloak();\r\n  const appContext = useContext(AppContext);\r\n  const { messages, getMessages, loading } = appContext;\r\n  const { authenticated } = keycloak;\r\n\r\n  useEffect(\r\n    () => getMessages(),\r\n    // eslint-disable-next-line\r\n    []\r\n  );\r\n\r\n  console.log(\"initialized:\", initialized, \", authenticated: \", authenticated);\r\n  console.log(\"Posts: \", messages);\r\n\r\n  if (!authenticated) {\r\n    return <div>You don't have access to this page</div>;\r\n  }\r\n\r\n  if ( loading ) {\r\n    return <div>Loading posts...</div>;\r\n  }\r\n\r\n  if (!messages || messages.length === 0) {\r\n    return <div>No post was found.</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {messages.map((post) => (\r\n        <Card bg=\"light\" key={post.id}>\r\n          <Card.Body>\r\n            <Card.Title>{post.title}</Card.Title>\r\n            <Card.Text>{post.body}</Card.Text>\r\n          </Card.Body>\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Posts;\r\n","import { useContext } from \"react\";\r\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\r\nimport { ReactKeycloakProvider } from \"@react-keycloak/web\";\r\nimport keycloak from \"../keycloak\";\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport AppContext from \"../context/AppContext\";\r\nimport Navbar from \"./NavBar\";\r\nimport ErrorMessage from \"./ErrorMessage\";\r\nimport Home from \"./Home\";\r\nimport Posts from \"./Posts\";\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nfunction KeycloakApp() {\r\n  const { setToken } = useContext(AppContext);\r\n\r\n  const onTokens = async (tokens) => {\r\n    console.log(\"keycloak tokens: \", tokens);\r\n    // alert(\"keycloak tokens: \"+ tokens);\r\n\r\n    setToken(tokens ? tokens.token : undefined, keycloak);\r\n  };\r\n\r\n  const onEvent = (event, error) => {\r\n    console.log(\"onKeycloakEvent\", event, error ? error : \"\");\r\n    // alert(\"onEvent: \"+ event + (error ? error : \"\"));\r\n  };\r\n\r\n  return (\r\n    <ReactKeycloakProvider\r\n      authClient={keycloak}\r\n      initOptions={{ onLoad: \"check-sso\" }}\r\n      onTokens={onTokens}\r\n      onEvent={onEvent}\r\n    >\r\n      <BrowserRouter>\r\n        <Navbar />\r\n        <Container style={{ marginTop: \"20px\" }}>\r\n          <Row>\r\n            <Col>\r\n              <ErrorMessage />\r\n            </Col>\r\n          </Row>\r\n          <Row style={{ marginTop: \"30px\" }}>\r\n            <Col>\r\n              <Switch>\r\n                <Route exact path=\"/posts\" render={(routeProps) => <Posts />} />\r\n                <Route exact path=\"/\" render={(routeProps) => <Home />} />\r\n                <Redirect to=\"/\" />\r\n              </Switch>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </BrowserRouter>\r\n    </ReactKeycloakProvider>\r\n  );\r\n}\r\n\r\nexport default KeycloakApp;\r\n","import AppState from './context/AppState';\nimport KeycloakApp from './components/KeycloakApp';\n\nimport \"./App.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nfunction App() {\n\n  return (\n      <AppState>\n        <KeycloakApp />\n      </AppState>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}